{% extends "base.html" %} {# TODO: Need to add link category and course static images based on model #}
{% load rules static %}

{% block navbar %}
{% include "semesterpage/navbar.html" %}
{% endblock %}

{% block content %}
<div class="wrap content">

{% for course in courses %}
<article>
<a class="kategori" href="{{ course.homepage }}">
  {% if course.logo %}
    <img src="{{ course.logo.url }}">
  {% else %}
    {% include "semesterpage/course_logo.svg" with course=course only %}
  {% endif %}
    <h2>{{ course }}</h2></a>
<ul>

{% for link in course.links.all %}
  <li style="list-style-image: url('{% if link.custom_category %}{{ link.custom_category.thumbnail.url }}{% else %}{% static "semesterpage/link_categories/" %}{{ link.category }}{% endif %}');"><a href="{{ link.url }}">{{ link.title|safe }}</a></li>
{% endfor %}


{# The 'edit course' link is only shown to users who has access #}
{% has_perm 'semesterpage.change_course' user course as can_edit_course %}
{% if can_edit_course %}
    <li style="list-style-image: url('{% static "semesterpage/link_categories/change_course.svg" %}');"><a href="{{ course.get_admin_url }}">Rediger fag</a></li>
{% endif %}

</ul>
</article>
{% endfor %}

{% for rll in semester.study_program.resource_link_lists %}
<article>
<a class="kategori" href="{{ rll.homepage }}">
  <img src="{{ rll.logo.url }}">

  <h2>{{ rll.display_name }}</h2></a>
<ul>

{% for link in rll.links.all %}
  <li style="list-style-image: url('{% if link.custom_category %}{{ link.custom_category.thumbnail.url }}{% else %}{% static "semesterpage/link_categories/" %}{{ link.category }}{% endif %}');"><a href="{{ link.url }}">{{ link.title|safe }}</a></li>
{% endfor %}

</ul>
</article>
{% endfor %}

</div>
{% endblock %}
